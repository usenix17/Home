<VirtualHost *:80>
 ServerName lathama.net
 ServerAlias www.lathama.net
 ServerAdmin lathama@gmail.com
 DocumentRoot /var/www/html/lathama.net
 ErrorLog ${APACHE_LOG_DIR}/lathama.net.error.log
 CustomLog ${APACHE_LOG_DIR}/lathama.net.access.log combined
 Redirect / https://lathama.net/
</VirtualHost>

<VirtualHost *:443>
 ServerName lathama.net
 ServerAlias www.lathama.net
 ServerAdmin lathama@gmail.com
 DocumentRoot /var/www/html/lathama.net
 ErrorLog ${APACHE_LOG_DIR}/lathama.net.error.log
 CustomLog ${APACHE_LOG_DIR}/lathama.net.access.log combined
 SSLEngine on
 SSLCertificateFile      /etc/letsencrypt/live/lathama.net/cert.pem
 SSLCertificateKeyFile /etc/letsencrypt/live/lathama.net/privkey.pem
 SSLCertificateChainFile /etc/letsencrypt/live/lathama.net/chain.pem
 SSLUseStapling on
 SSLStaplingResponderTimeout 5
 SSLStaplingReturnResponderErrors off
 <directory /var/www/html/lathama.net>
  Options FollowSymLinks
  AllowOverride All
  Order allow,deny
  allow from all
  <IfModule mod_rewrite.c>
   RewriteEngine On
   RewriteCond %{HTTPS} !=on
   RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
   RewriteRule ^ http://%1%{REQUEST_URI} [R=301,L]
  </IfModule>
 </directory>
 <Proxy *>
  Order allow,deny
  Allow from all
 </Proxy>
 ProxyPreserveHost On
 ProxyRequests off
 ProxyPass /git http://127.0.0.1:3000
 ProxyPassReverse /git http://127.0.0.1:3000
</VirtualHost>
